{% extends "webui/files/base.html" %}
{% load thumbnail %}


{% block title %}{{ entity.title }}{% endblock %}

{% block breadcrumbs %}{{ block.super }}
<li class="active">{{ file.basename }}</li>
{% endblock breadcrumbs %}


{% block content %}

  <div class="row-fluid">
    <div class="span12">

<h1>
{{ file.basename }}
</h1>

<h3>
{% if entity.locked %}<a class="muted" title="This object is locked" class="btn btn-primary">edit</a>
{% else %}<a href="{{ file.url }}edit/" class="btn btn-primary">edit</a>
{% endif %}
</h3>

<dl class="dl-horizontal">
{% for lv in file.labels_values %}
  {% if lv.value %}<dt>{{ lv.label }}</dt><dd>{{ lv.value|safe|linebreaks }}</dd>{% endif %}
{% endfor %}
</dl>

{% if file and file.access_abs %}
{% thumbnail file.access_abs "500x500" crop="center" as img %}
<img src="{{ img.url }}" width="{{ img.width }}" height="{{ img.height }}">
{% empty %}
<p>No image</p>
{% endthumbnail %}
{% endif %}

<table class="table table-condensed table-striped muted">
  <tr>
    <td>role</td><td>{{ file.role }}</td>
  </tr>
  <tr>
    <td>size</td><td>{{ file.size|filesizeformat }}</td>
  </tr>
  <tr>
    <td>path_abs</td><td>{{ file.path_abs }}</td>
  </tr>
  <tr>
    <td>path_rel</td>
    <td>
      {{ file.path_rel }}
      &nbsp;&bull;&nbsp; <a href="{{ file.media_url }}">download fullsize</a>
    </td>
  </tr>
  <tr>
    <td>original name</td><td>{{ file.basename_orig }}</td>
  </tr>
<!--
  <tr>
    <td>src</td><td>{{ file.src }}</td>
  </tr>
-->
  <tr>
    <td>access_abs</td><td>{{ file.access_abs }}</td>
  <tr>
  <tr>
    <td>access_rel</td>
    <td>
      {{ file.access_rel }}
      &nbsp;&bull;&nbsp; <a href="{{ file.access_url }}">download access</a>
    </td>
  <tr>
  <tr>
    <td>SHA256</td><td>{{ file.sha256 }}</td>
  </tr>
  <tr>
    <td>SHA1</td><td>{{ file.sha1 }}</td>
  </tr>
  <tr>
    <td>MD5</td><td>{{ file.md5 }}</td>
  </tr>
  <tr>
    <td>xmp</td><td>{{ file.xmp }}</td>
  </tr>
  <tr>
    <td>links</td>
    <td>
    {% for link in file.links_all %}
    {{ link }}<br/>
    {% endfor %}
    </td>
  </tr>
</table>

<form name="new-access" action="{% url "webui-file-new-access" file.repo file.org file.cid file.eid file.role file.sha1 %}" method="post">{% csrf_token %}
{{ new_access_form.as_p }}
<input class="btn btn-mini" type="submit" value="Generate New Access File">
</form>

    </div><!-- .span12 -->
  </div><!-- .row-fluid -->

{% endblock content %}
