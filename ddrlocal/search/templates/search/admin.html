{% extends "search/base.html" %}


{% block title %}Admin{% endblock %}

{% block breadcrumbs %}{{ block.super }}
<li class="active">Admin</li>
{% endblock breadcrumbs %}


{% block content %}

  <div class="row-fluid">
    <div class="span12">

<h1>
Search Admin
</h1>


<h3>
Status
</h3>

{% if status %}

<table class="table table-striped table-condensed">
  <tr class="{% if status.ok %}success{% else %}error{% endif %}"><th>ok</th><td>{{ status.ok }}</td></tr>
  <tr class="{% if status.shards.successful %}success{% else %}error{% endif %}"><th>shards.successful</th><td>{{ status.shards.successful }}</td></tr>
  <tr class="{% if status.indices.ddr.docs.num_docs %}success{% else %}error{% endif %}"><th>indices.ddr.docs.num_docs</th><td>{{ status.indices.ddr.docs.num_docs }}</td></tr>
  <tr><th>indices.ddr.index.size</th><td>{{ status.indices.ddr.index.size }}</td></tr>
</table>

{% else %}

<p>
<span class="label label-important">ERROR</span>
No response from Elasticsearch server!
</p>

{% endif %}{# status #}


<h3>
Re-index
</h3>

<form name="indexconfirm" action="{% url "search-reindex" %}" method="post">{% csrf_token %}
{{ indexform.as_p }}
<input name="submit" type="submit" value="Re-index" />
</form>


<h3>
Drop Indexes
</h3>

<form name="dropconfirm" action="{% url "search-drop" %}" method="post">{% csrf_token %}
{{ dropform.as_p }}
<input name="submit" type="submit" value="Drop Index" />
</form>

    </div><!-- .span12 -->
  </div><!-- .row-fluid -->

{% endblock content %}
